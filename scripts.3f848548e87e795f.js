importScripts("https://www.gstatic.com/firebasejs/8.0.2/firebase-app.js"),importScripts("https://www.gstatic.com/firebasejs/7.14.6/firebase-messaging.js");var firebaseConfig={apiKey:"AIzaSyAVcZ7eO70_cCNjFP7_AlrUy3drxy7ogQI",authDomain:"amdomicilios-c3c0f.firebaseapp.com",databaseURL:"https://amdomicilios-c3c0f.firebaseio.com",projectId:"amdomicilios-c3c0f",storageBucket:"amdomicilios-c3c0f.appspot.com",messagingSenderId:"658284013800",appId:"1:658284013800:web:89cea3033e402740a3415d",measurementId:"G-KLJ5E4N6WH"};firebase.initializeApp(firebaseConfig);const messaging=firebase.messaging();messaging.setBackgroundMessageHandler(function(e){console.log(e);var i=e.data.Titulo;if(new BroadcastChannel("listener").postMessage(e.data),!e.data.RefreshCentroDespacho||"false"===e.data.RefreshCentroDespacho)return console.log("SI CREO PUSH BACKGROUND"),self.registration.showNotification(i,{body:e.data.Descripcion,icon:"/Recursos/img/flash.png",data:{url:e.data.Url2,id:e.data.ItemId},actions:[{action:"open_url",title:"Abrir Centro Control"}]});console.log("NO CREO PUSH BACKGROUND")}),self.addEventListener("install",e=>e.waitUntil(self.skipWaiting())),self.addEventListener("activate",e=>e.waitUntil(self.clients.claim())),self.addEventListener("notificationclick",function(e){if("open_url"===e.action){var i=e.notification.data.url;console.log("open_url",i),e.notification.close(),e.waitUntil(clients.matchAll({includeUncontrolled:!0,type:"window"}).then(t=>{console.log("cuales clientes hay"),console.log(t);for(var s=0;s<t.length;s++){var a=t[s];if(a.url===i&&"focus"in a)return a.focus()}if(clients.openWindow)return clients.openWindow(i)}))}},!1);